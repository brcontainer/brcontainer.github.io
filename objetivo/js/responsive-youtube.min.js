/* Responsive-youtube.js 0.1.4 | Copyright (c) 2018 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e,t,n){"use strict";var r,o=[],i=0,a=!1,c=!0,u={},f={},s=e.Element&&e.Element.prototype,h="[data-ry-video]:not(iframe)",l=",with,height,ignore,video,cover,",d=e.MutationObserver||e.WebKitMutationObserver;function y(e){if(!0!==e)r&&clearTimeout(r),r=setTimeout(y,300,!0);else if(o.length)for(var t=0,n=o.length;t<n;t++)v(o[t].getIframe())}function v(e){if(e&&t.body.contains(e)&&!0!==m(e,"ignore")){var n=m(e,"width")||e.clientWidth,r=m(e,"height")||e.clientHeight;e.setAttribute("data-ry-width",n),e.setAttribute("data-ry-height",r),e.width="100%",e.height=n!=r?e.clientWidth/(n/r):e.clientWidth}}function g(e,n,r){r&&"object"==typeof r||(r={}),S(f,r);var i=new YT.Player(e,{videoId:n,playerVars:r,events:{onReady:function(n){v(t.getElementById(e)),E("ready",n,i)},onStateChange:function(e){E("state",e,i)},onPlaybackQualityChange:function(e){E("quality",e,i)},onPlaybackRateChange:function(e){E("rate",e,i)},onError:function(e){E("error",e,i)},onApiChange:function(e){E("api",e,i)}}});o.push(i),E("create",i)}function p(e){for(var t=e.attributes,n={},r=t.length-1;r>=0;r--){var o=t[r].nodeName;0===o.indexOf("data-ry-")&&(o=o.substr(8),-1===l.indexOf(","+o+",")&&(n[o]=m(e,o)))}return n}function m(e,t){var n,r=e.getAttribute("data-ry-"+t);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(r))try{n=JSON.parse(r)}catch(e){}return n||r}function b(e){if(!c){for(var t=e.addedNodes,n=[],r=[],o=t.length-1;o>=0;o--)t[o].matches(h)?n.push(t[o]):r.push(t[o]);w(n),function(e){for(var t=0,n=e.length;t<n;t++)w(e[t].querySelectorAll(h))}(r)}}function w(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.id||(r.id="responsive-youtube-"+ ++i),g(r.id,m(r,"video"),p(r))}}function S(e,t){for(var n in e)/^(object|function)$/i.test(typeof e[n])||(t[n]=e[n])}function A(){if(w(t.querySelectorAll(h)),!a){if(a=!0,e.addEventListener("resize",y),!d)return E("error");new d(function(e){e.forEach(b)}).observe(t.body,{childList:!0}),E("done")}}function E(e,t,n){if(u[e])for(var r=u[e],o=0;o<r.length;o++)r[o](t,n)}function N(e,t,n){"function"==typeof t&&(u[e]||(u[e]=[]),n?u[e]=u[e].filter(function(e){return e!==t}):u[e].push(t))}e.ResponsiveYoutube={start:function(n){if("object"==typeof n?S(n,f):f={},c=!1,e.YT&&e.YT.Player)return A();e.onYouTubeIframeAPIReady=A;var r=t.createElement("script");r.ansyc=!0,r.src="https://www.youtube.com/iframe_api";var o=t.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)},destroy:function(){c=!0,f={};for(var e=o.length-1;e>=0;e--)o[e].destroy();o=[]},supported:!!d,on:function(e,t){N(e,t)},off:function(e,t){N(e,t,!0)}},s&&!s.matches&&(s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1})}(window,document);
